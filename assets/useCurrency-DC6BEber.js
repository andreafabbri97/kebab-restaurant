import{r as n,p as l}from"./index-BOCN9L4q.js";const a={"€":{symbol:"€",position:"before",decimals:2},$:{symbol:"$",position:"before",decimals:2},"£":{symbol:"£",position:"before",decimals:2}},s="€";function C(){const[e,o]=n.useState(s),[u,d]=n.useState(!0),c=n.useCallback(async()=>{try{const t=await l();o(t.currency||s)}catch(t){console.error("Error loading currency:",t),o(s)}finally{d(!1)}},[]);n.useEffect(()=>{c();const t=r=>{r.detail?.currency&&o(r.detail.currency)};return window.addEventListener("settings-updated",t),()=>{window.removeEventListener("settings-updated",t)}},[c]);const y=n.useCallback(t=>{const r=a[e]||a[s],i=t.toFixed(r.decimals);return r.position==="before"?`${r.symbol}${i}`:`${i}${r.symbol}`},[e]),f=n.useCallback(()=>e,[e]);return{currency:e,loading:u,formatPrice:y,getCurrencySymbol:f,reload:c}}let m=new Set;function b(e){m.forEach(o=>o(e))}l().then(e=>{e.currency}).catch(()=>{});typeof window<"u"&&window.addEventListener("settings-updated",(e=>{e.detail?.currency&&b(e.detail.currency)}));export{C as u};
